<!doctype html>
<html lang="es">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Potatorrent</title>

    <link rel="icon" type="image/png" href="/public/img/logo.png" sizes="any">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Anton&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/css/select2.min.css">

    <link rel="stylesheet" type="text/css" href="/public/css/select2.bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/public/css/style.css">
</head>

<body>
    <div aria-live="polite" aria-atomic="true" style="position: fixed;top: 10px;min-height: 200px;right: 10px;z-index: 1040;">
        <div id="notification" class="toast fade hide" data-delay="3000" style="border-radius:0;">            
            <div class="toast-body alert text-center" style="margin-bottom: 0;">
                <strong id="notification-text">
                    Enlace copiado al portapapeles
                </strong>
            </div>
        </div>
    </div>

    <div id="top-bar" class="bg-dark text-light sticky-top text-center py-1 px-3">
        <button id="schedules" class="btn float-left p-0 text-light" data-toggle="tooltip" data-placement="right"
            title="Búsquedas programadas">
            <i class="fa fa-2x fa-fw fa-clock-o" aria-hidden="true"></i>
            <span id="schedules-count" class="badge badge-primary" style="display: none;"></span>
        </button>
        <a id="title" href="#">
            <img height="36px" src="/public/img/logo.png" />
            potatorrent
            <span id="version" class="badge badge-danger"></span>
        </a>
        <a id="new-version" target="_blank" href="https://github.com/nilbelec/potatorrent/releases" class="badge badge-success my-1"
            data-toggle="tooltip" data-placement="left" style="display: none;">
            <i class="fa fa-bell fa-fw"></i>
        </a>
    </div>
    <main class="py-4">
        <div class="container">
            <div class="form-row">
                <div class="form-group col">
                    <select id="categoria" class="form-control" disabled>
                        <option value=""></option>
                    </select>
                </div>
                <div class="form-group col">
                    <select id="subcategoria" class="form-control" disabled>
                        <option value=""></option>
                    </select>
                </div>
                <div class="form-group col">
                    <select id="calidad" class="form-control" disabled>
                        <option value=""></option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col">
                    <input id="search-input" class="form-control mr-sm-2" type="search" placeholder="Por palabras..."
                        aria-label="Search" disabled>
                </div>
            </div>
            <button type="button" id="search" class="btn btn-potato btn-block">Buscar</button>
        </div>
        <div class="container pt-3 pb-5" id="search-container">
            <div id="results-top-bar" style="display: none;">
                <small id="search-results-info" class="text-muted"></small>
                <button type="button" id="schedule-search" class="btn btn-secondary btn-sm float-right">
                    <i class="fa fa-floppy-o fa-fw" aria-hidden="true"></i>
                    Programar esta búsqueda
                </button>
                <div class="clearfix"></div>
            </div>
            <div id="search-results-container"></div>
            <nav id="search-results-pagination" class="my-1 fixed-bottom"></nav>
        </div>
    </main>

    <div id="result-template-container" hidden>
        <div class="torrent row py-3 border-bottom">
            <div class="col-auto my-auto">
                <img class="torrent-img lazyload rounded" src="/public/img/loading.png" width="90" height="128">
            </div>
            <div class="col">
                <div class="row h-100">
                    <div class="col">
                        <span class="torrent-title"></span>
                    </div>
                    <div class="col-auto">
                        <span title="Fecha de publicación" class="torrent-fecha badge badge-dark has-tooltip"></span>
                    </div>
                    <div class="w-100"></div>
                    <div class="col mt-auto">
                        <span title="Calidad o tipo de elemento" class="torrent-calidad badge badge-info has-tooltip"></span>
                    </div>
                    <div class="col mt-auto text-right text-md-center">
                        <span title="Tamaño de la descarga" class="torrent-tamano badge badge-warning has-tooltip"></span>
                    </div>
                    <div class="col-12 col-md mt-3 mt-md-auto text-right">
                        <div class="btn-group download-group">
                            <button type="button" class="torrent-download btn btn-danger btn-sm">
                                <i class="fa fa-download fa-fw" aria-hidden="true"></i>
                                Descargar Torrent
                            </button>
                            <button type="button" class="btn btn-danger btn-sm dropdown-toggle dropdown-toggle-split"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            </button>
                            <div class="dropdown-menu dropdown-menu-right">
                                <button class="dropdown-item torrent-download-copy" type="button">
                                    Copiar enlace al portapapeles
                                    <i class="fa fa-copy fa-fw" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-divider"></div>
                                <button class="dropdown-item torrent-download-password" type="button">
                                    Buscar contraseña para descomprimir
                                    <i class="fa fa-key fa-fw" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="password-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Contraseña para descomprimir:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <span id="password" class="bg-danger d-block p-3 text-center text-light"></span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="not-found-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <i class="fa fa-exclamation-triangle fa-fw" aria-hidden="true"></i>
                        Parece que el fichero torrent ya no existe... :(
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="schedule-search-modal" data-backdrop="static" tabindex="-1" role="dialog"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Programar nueva búsqueda</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <label class="col-sm-3">Categoría</label>
                        <div class="col-sm-9">
                            <span id="staticCategoria" class="badge badge-info"></span>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-3">Subcategoría</label>
                        <div class="col-sm-9">
                            <span id="staticSubcategoria" class="badge badge-info"></span>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-3">Calidad</label>
                        <div class="col-sm-9">
                            <span id="staticCalidad" class="badge badge-info"></span>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-3">Palabras</label>
                        <div class="col-sm-9">
                            <span id="staticPalabras" class="badge badge-info"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="schedule-add-folder" class="col-sm-3 col-form-label">Directorio</label>
                        <div class="col-sm-9">
                            <select required class="form-control" id="schedule-add-folder" required></select>
                            <small class="form-text text-muted">¿En qué carpeta quieres que se descarguen los ficheros
                                torrents y sus contraseñas (si tuvieran)?</small>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="schedule-add-interval" class="col-sm-3 col-form-label">Intervalo</label>
                        <div class="col-sm-9">
                            <input type="number" required step="1" min="1" max="999999" class="form-control"
                                id="schedule-add-interval" value="30">
                            <small class="form-text text-muted">¿Cada cuántos minutos quieres comprobar si hay contenido
                                nuevo?</small>
                        </div>
                    </div>
                    <div id="schedule-add-error" class="alert alert-danger" style="display: none;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="schedule-search-save" class="btn btn-potato">Guardar</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="schedule-template-container" hidden>
        <div class="schedule row py-1">
            <div class="col-auto my-auto">
                <img class="schedule-img lazyload rounded" src="/public/img/loading.png" width="56" height="80">
            </div>
            <div class="col">
                <div class="row h-100 align-items-center">
                    <div class="col">
                        <div class="row">
                            <div class="col">
                                <span class="schedule-categoria badge badge-info has-tooltip" title="Categoría de la búsqueda"></span>
                                <span class="schedule-subcategoria badge badge-info has-tooltip" title="Subategoría de la búsqueda"></span>
                                <span class="schedule-calidad badge badge-info has-tooltip" title="Calidad de la búsqueda"></span>
                                <span class="schedule-palabras badge badge-info has-tooltip" title="Términos de búsqueda"></span>
                            </div>
                            <div class="col-auto">
                                <strong>Lanzada</strong>
                                <span class="schedule-last-execution badge badge-secondary">-</span>
                                y cada
                                <span class="schedule-interval badge badge-secondary">-</span>
                                minutos
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span class="schedule-last-torrent-date mt-2 badge badge-success has-tooltip" title="Fecha de publicación del último torrent encontrado"></span>
                                <small class="schedule-last-torrent has-tooltip" title="Último torrent encontrado"></small>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto">
                        <i class="schedule-folder text-warning fa fa-2x fa-fw fa-folder"></i>
                    </div>
                    <div class="col-auto">
                        <button class="schedule-enable btn btn-outline-primary has-tooltip"
                            title="Volver a habilitar esta búsqueda">
                            <i class="fa fa-play fa-fw"></i>
                        </button>
                        <button class="schedule-disable btn btn-outline-secondary has-tooltip"
                            title="Deshabilitar esta búsqueda">
                            <i class="fa fa-stop fa-fw"></i>
                        </button>
                        <button class="schedule-delete btn btn-outline-danger has-tooltip"
                            title="Eliminar esta búsqueda">
                            <i class="fa fa-trash fa-fw"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="schedules-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Búsquedas programadas</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="schedules-none" class="alert alert-info">
                        <i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>
                        No tienes ninguna búsqueda programada. Realiza una búsqueda y selecciona la opción de "Programar
                        esta búsqueda"
                    </div>
                    <div id="schedules-results"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="schedules-refresh-btn" class="btn btn-potato">
                        <i class="fa fa-refresh fa-fw" aria-hidden="true"></i>
                        Actualizar
                    </button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/js/i18n/es.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/es.js"></script>

    <script src="/public/js/init.js"></script>
    <script src="/public/js/app.js"></script>
</body>

</html>